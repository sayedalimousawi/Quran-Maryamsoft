<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‚Ø±Ø¢Ù†</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet" />
  <script language="javascript" src="Quran.js"></script>
  <script language="javascript" src="QuranTG.js"></script>
  <script language="javascript" src="Sure.js"></script>
  <style>
    :root {
      --bg: linear-gradient(135deg, #0f172a, #111827);
      --card: #0b1222;
      --accent: #16a34a;
      --accent-2: #22c55e;
      --muted: #9ca3af;
      --border: rgba(255, 255, 255, 0.08);
      --text: #f3f4f6;
      --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.55);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Vazirmatn', 'Tahoma', sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 32px 16px 48px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: -50% 0 auto 0;
      height: 420px;
      background: radial-gradient(circle at 20% 20%, rgba(34, 197, 94, 0.2), transparent 35%),
        radial-gradient(circle at 80% 0%, rgba(16, 185, 129, 0.18), transparent 32%);
      filter: blur(10px);
      opacity: 0.7;
      pointer-events: none;
    }

    .page {
      width: min(1100px, 100%);
      display: grid;
      gap: 20px;
      position: relative;
      z-index: 1;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .title {
      font-size: 32px;
      font-weight: 700;
      margin: 0;
      letter-spacing: -0.5px;
    }

    .subtitle {
      margin: 0;
      color: var(--muted);
      line-height: 1.6;
    }

    .meta-bar {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .meta-chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 14px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 20px;
      box-shadow: var(--shadow);
    }

    label { display: block; font-weight: 600; margin-bottom: 10px; }

    textarea {
      width: 100%;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.02);
      color: var(--text);
      padding: 16px;
      font-size: 20px;
      resize: vertical;
      font-family: 'wm_Naskh Qurani 93', 'Vazirmatn', sans-serif;
      transition: border 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    }

    textarea:focus {
      outline: none;
      border-color: rgba(22, 163, 74, 0.6);
      box-shadow: 0 0 0 4px rgba(22, 163, 74, 0.2);
      background: rgba(255, 255, 255, 0.04);
    }

    .actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 14px;
    }

    button {
      border: none;
      border-radius: 12px;
      background: linear-gradient(135deg, #22c55e, #15803d);
      color: #0a0f1e;
      font-weight: 700;
      padding: 12px 18px;
      cursor: pointer;
      font-size: 16px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 12px 25px -12px rgba(34, 197, 94, 0.65);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.2s ease;
    }

    button:hover { transform: translateY(-1px); filter: brightness(1.03); }
    button:active { transform: translateY(0); box-shadow: 0 8px 18px -10px rgba(34, 197, 94, 0.55); }

    .secondary {
      background: rgba(255, 255, 255, 0.04);
      color: var(--text);
      box-shadow: none;
      border: 1px solid var(--border);
      padding-inline: 14px;
    }

    .secondary:hover { filter: brightness(1.08); }

    .status {
      color: var(--muted);
      font-size: 14px;
    }

    .status strong { color: var(--accent-2); }

    .results-wrapper { display: grid; gap: 12px; }

    .results {
      display: grid;
      gap: 12px;
      max-height: 520px;
      overflow: auto;
      padding: 6px 2px;
    }

    .result-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      display: grid;
      gap: 8px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 42px;
      height: 42px;
      border-radius: 12px;
      background: rgba(22, 163, 74, 0.16);
      color: #4ade80;
      font-weight: 700;
      font-size: 18px;
    }

    .ayah { margin: 0; font-size: 24px; line-height: 1.8; font-family: 'wm_Naskh Qurani 93', 'Vazirmatn', sans-serif; }
    .meta { margin: 0; color: var(--muted); font-size: 14px; }

    .highlight {
      background: rgba(74, 222, 128, 0.16);
      border-bottom: 2px solid rgba(34, 197, 94, 0.9);
      padding: 1px 4px;
      border-radius: 6px;
    }

    .hint-list {
      display: grid;
      gap: 10px;
      margin: 0;
      padding: 0;
      list-style: none;
      color: var(--muted);
    }

    .hint-item {
      display: grid;
      gap: 4px;
      padding: 12px 14px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px dashed var(--border);
    }

    .hint-title { font-weight: 700; color: var(--text); margin: 0; }
    .hint-text { margin: 0; }

    .empty-state {
      text-align: center;
      padding: 32px 16px;
      border: 1px dashed var(--border);
      border-radius: 16px;
      color: var(--muted);
      background: rgba(255, 255, 255, 0.02);
    }

    .empty-state strong { color: var(--accent-2); }

    @media (max-width: 768px) {
      body { padding: 20px 12px 32px; }
      .title { font-size: 26px; }
      textarea { font-size: 18px; }
      .ayah { font-size: 20px; }
    }
  </style>
</head>
<body>
  <main class="page">
    <header>
      <p class="title">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù‚Ø±Ø¢Ù†</p>
      <p class="subtitle">Ø¹Ø¨Ø§Ø±Øª ÛŒØ§ ÙˆØ§Ú˜Ù‡ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯ ØªØ§ Ø¢ÛŒØ§Øª Ù…Ø±ØªØ¨Ø· Ø¯Ø± Ú©Ù…â€ŒØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯.</p>
      <div class="meta-bar">
        <span class="meta-chip">âš¡ Ø³Ø±Ø¹Øª Ù†Ù…Ø§ÛŒØ´ ÙÙˆØ±ÛŒ Ù†ØªØ§ÛŒØ¬</span>
        <span class="meta-chip">âŒ¨ Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø§ Enter</span>
        <span class="meta-chip">âœ¨ Ø¨Ø±Ø¬Ø³ØªÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ø¨Ø§Ø±Øª Ø¯Ø± Ù…ØªÙ†</span>
      </div>
    </header>

    <section class="card">
      <label for="oStrSearch">Ø¹Ø¨Ø§Ø±Øª Ù…ÙˆØ±Ø¯ Ø¬Ø³ØªØ¬Ùˆ</label>
      <textarea id="oStrSearch" rows="3" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÛŒÙ…" aria-label="Ø¹Ø¨Ø§Ø±Øª Ù…ÙˆØ±Ø¯ Ø¬Ø³ØªØ¬Ùˆ" onkeydown="handleKeydown(event)"></textarea>
      <div class="actions">
        <div style="display:flex; gap:10px; flex-wrap: wrap;">
          <button type="button" onclick="SmartSearch()" aria-label="Ø¬Ø³ØªØ¬Ùˆ">
            <span>ğŸ”</span>
            <span>Ø¬Ø³ØªØ¬Ùˆ</span>
          </button>
          <button type="button" class="secondary" onclick="clearResults()" aria-label="Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†">
            <span>ğŸ§¹</span>
            <span>Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†</span>
          </button>
        </div>
        <span id="resultMeta" class="status" aria-live="polite">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø¹Ø¨Ø§Ø±Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</span>
      </div>
    </section>

    <section class="card results-wrapper">
      <div class="results" id="oResult" aria-live="polite"></div>
      <div>
        <ul class="hint-list">
          <li class="hint-item">
            <p class="hint-title">Ù†Ù…ÙˆÙ†Ù‡ Ù¾Ø±Ø³â€ŒÙˆØ¬Ùˆ</p>
            <p class="hint-text">ØªØ±Ú©ÛŒØ¨ Ú†Ù†Ø¯ Ú©Ù„Ù…Ù‡ Ù…Ø«Ù„ Â«Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÛŒÙ…Â» ÛŒØ§ Â«Ù†ÙˆØ± Ø§ÛŒÙ…Ø§Ù†Â» Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯ ØªØ§ Ø¢ÛŒØ§Øª Ù…Ø±ØªØ¨Ø· Ø¨Ù‡ ØªØ±ØªÛŒØ¨ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯.</p>
          </li>
          <li class="hint-item">
            <p class="hint-title">ØªØ±ÙÙ†Ø¯Ù‡Ø§ÛŒ Ø³Ø±Ø¹ØªÛŒ</p>
            <p class="hint-text">Ú©Ù„ÛŒØ¯ Enter ÛŒØ§ Ctrl + Enter Ø¬Ø³ØªØ¬Ùˆ Ø±Ø§ Ø¢ØºØ§Ø² Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø¯Ú©Ù…Ù‡ Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ù†ØªÛŒØ¬Ù‡ Ø±Ø§ Ø±ÛŒØ³Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
          </li>
        </ul>
      </div>
    </section>
  </main>

  <script language="javascript">
  //---------------------------------------------------------------------------------------------
  mFatheh=Char(1614)
  mKasreh=Char(1616)
  mZameh=Char(1615)
  mFathatan=Char(1611)
  mKasratan=Char(1613)
  mZamatan=Char(1612)
  mTashdid=Char(1617)
  mSaken=Char(1618)
  mZero=Char(1760)
  mMad=Char(1619)
  mTalef=Char(1648)
  mBalef=Char(1622)
  mMim=Char(1762)
  mYeheshba=Char(1767)

  vqfSala=Char(1750)
  vqfQala=Char(1751)
  vqfJim=Char(1754)
  vqfMim=Char(1752)
  vqfSin=Char(1756)
  vqf3Point=Char(1755)

  chSpace=Char(32)
  chKashideh=Char(1600)
  chHmz=Char(1569)
  chAlf=Char(1575)
  chYeh_HMZ=Char(1574)
  chAlf_THMZ=Char(1571)
  chAlf_BHMZ=Char(1573)
  chAlf_TVSL=Char(1649)
  chDal=Char(1583)
  chLam=Char(1604)
  chMim=Char(1605)
  chNun=Char(1606)
  chVav=Char(1608)
  chHeh=Char(1607)
  chYeh=Char(1740)
  chYeh_B2P=Char(1610)
  chMaq=Char(1609)
  chYeheshba=Char(1766)
  chVaveshba=Char(1765)
  //-------------------------------------------------------
  function Char(ch)
  {
          if( ch.toString(16).length==2 ) return unescape("%u00"+ch.toString(16))
          if( ch.toString(16).length==3 ) return unescape("%u0"+ch.toString(16))
          return unescape("%u"+ch.toString(16))
  }
  //-------------------------------------------------------
  function Strip(str,chars)
  {
          newstr=""
          for(i=0;i<str.length;i++)
          {
                  if(chars.indexOf(str.charAt(i))==-1) newstr+=str.charAt(i)
          }
          return newstr
  }
  //-------------------------------------------------------
  function GenerateData(Text)
  {
          var sure=Text.split(" + ");
          for(var i=0;i<sure.length;i++)
          {
                  var ayat=sure[i].split(" - ");
                  sure[i]=ayat;
          }
          return sure;
  }
  //-------------------------------------------------------
  function ReplaceAll(str,strFind,strReplace)
  {
          re=new RegExp(strFind,"g")
          return str.replace(re,strReplace)
  }
  //-------------------------------------------------------
  function RemoveMarks(str)
  {
          var erab=mFatheh+mKasreh+mZameh+mFathatan+mKasratan+mZamatan+mTashdid+mSaken+mZero+mMad+mTalef+mBalef+mMim+mYeheshba+vqfSala+vqfQala+vqfJim+vqfMim+vqfSin+vqf3Point;
          for(var i=0;i<erab.length;i++)
          {
                  str=ReplaceAll(str,erab.charAt(i),"");
          }
          return str;
  }
  //-------------------------------------------------------
  function RemoveChars(str)
  {
          var C=ccA+ccK+ccX+ccNX+ccY+ccNY+ccTMX+ccTMNX+ccTMY+ccTMNY+ccBMX+ccBMNX+ccBMY+ccBMNY+ccZWNJ+pT1P+pT2P+pT3P+pB1P+pB2P+pB3P+pTAA+pTVSL+pTHMZ+pBHMZ+mFatheh+mKasreh+mZameh+mFathatan+mKasratan+mZamatan+mTashdid+mSaken+mZero+mMad+mTalef+mBalef+mMim+mYeheshba+vqfSala+vqfQala+vqfJim+vqfMim+vqfSin+vqf3Point;
          for(var i=0;i<C.length;i++)
          {
                  str=ReplaceAll(str,C.charAt(i),"");
          }
          return str;
  }
  //-------------------------------------------------------
  function escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  }
  //-------------------------------------------------------
  function highlightMatch(text, query) {
    if (!query) return text;
    try {
      var regex = new RegExp(escapeRegExp(query), 'gi');
      return text.replace(regex, function(match) {
        return '<span class="highlight">' + match + '</span>';
      });
    } catch (e) {
      return text;
    }
  }
  //-------------------------------------------------------
  function renderEmptyState(message){
    return "<div class='empty-state'>"+message+"</div>";
  }
  //-------------------------------------------------------
  function handleKeydown(event){
    if(event.key==='Enter' && (event.ctrlKey || event.metaKey || !event.shiftKey)){
      event.preventDefault();
      SmartSearch();
    }
  }
  //-------------------------------------------------------
  function clearResults(){
    oStrSearch.value='';
    oResult.innerHTML=renderEmptyState('Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø¹Ø¨Ø§Ø±Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
    document.getElementById('resultMeta').innerHTML='Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ØŒ Ø¹Ø¨Ø§Ø±Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.';
    oStrSearch.focus();
  }
  //-------------------------------------------------------
  function SmartSearch()
  {
          var inputValue=oStrSearch.value.trim().replace(/\s+/g,' ');
          if(!inputValue){
            clearResults();
            return;
          }
          var sFind=RemoveMarks(inputValue);
          sFind=ReplaceAll(sFind,"ÙŠ","ÛŒ"); // yeh Farsi
          sFind=ReplaceAll(sFind,"Ú©","Ùƒ"); // Kaf Arab
          count=0
          var fragments=[];
          for(var i=0;i<Quran.length;i++)
          {
                  for(var j=0;j<Quran[i].length;j++)
                  {
                          var strAye=RemoveMarks(Quran[i][j]);
                          if( strAye.indexOf(sFind)!=-1 )
                          {
                                  count++;
                                  var ayahHighlighted=highlightMatch(QuranTG[i][j], sFind);
                                  fragments.push(
                                    "<article class='result-card'><div class='badge'>"+count+
                                    "</div><p class='ayah'>"+ayahHighlighted+"</p><p class='meta'>Ø³ÙˆØ±Ù‡ " + Sure[i] + " â€” Ø¢ÛŒÙ‡ " + (j+1) + "</p></article>"
                                  );
                          }
                  }
          }
          var meta=document.getElementById('resultMeta');
          if(count===0){
            oResult.innerHTML = renderEmptyState('Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯. <strong>Ù„Ø·ÙØ§Ù‹</strong> Ú©Ù„Ù…Ù‡ ÛŒØ§ ØªØ±Ú©ÛŒØ¨ Ø¯ÛŒÚ¯Ø±ÛŒ Ø±Ø§ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.');
            meta.innerHTML='Ù…ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯. <strong>Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¬Ø¯ÛŒØ¯</strong> Ø±Ø§ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯.';
          } else {
            oResult.innerHTML = fragments.join('');
            meta.innerHTML=''+count+' Ù†ØªÛŒØ¬Ù‡ Ù¾ÛŒØ¯Ø§ Ø´Ø¯ Ø¨Ø±Ø§ÛŒ <strong>"'+inputValue+'"</strong>.';
          }
  }
  //-------------------------------------------------------
  var Quran=GenerateData(QuranText);
  var QuranTG=GenerateData(QuranTextTG);
  var Sure=GenerateData(SureText);

  clearResults();

  </script>
</body>
</html>
</html>
